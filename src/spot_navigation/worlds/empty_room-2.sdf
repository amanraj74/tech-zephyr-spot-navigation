<?xml version="1.0"?>
<sdf version="1.6">
    <world name="empty_room">
        <plugin
            filename="gz-sim-physics-system"
            name="gz::sim::systems::Physics">
        </plugin>

        <plugin
            filename="gz-sim-sensors-system"
            name="gz::sim::systems::Sensors">
            <render_engine>ogre2</render_engine>
        </plugin>

        <plugin
            filename="gz-sim-scene-broadcaster-system"
            name="gz::sim::systems::SceneBroadcaster">
        </plugin>

        <plugin
            filename="gz-sim-user-commands-system"
            name="gz::sim::systems::UserCommands">
        </plugin>

        <gui fullscreen="0">
            <plugin filename="MinimalScene" name="3D View">
                <ignition-gui>
                    <title>3D View</title>
                    <property type="bool" key="showTitleBar">false</property>
                    <property type="string" key="state">docked</property>
                </ignition-gui>

                <engine>ogre2</engine>
                <scene>scene</scene>
                <camera_pose>-2.8036446571350098 -3.2577419281005859 1.596643328666687 -0.00002 0.612 0.591</camera_pose>
            </plugin>

            <plugin filename="EntityContextMenuPlugin" name="Entity context menu">
                <ignition-gui>
                    <property key="state" type="string">floating</property>
                    <property key="width" type="double">5</property>
                    <property key="height" type="double">5</property>
                    <property key="showTitleBar" type="bool">false</property>
                </ignition-gui>
            </plugin>
            <plugin filename="GzSceneManager" name="Scene Manager">
                <ignition-gui>
                    <property key="resizable" type="bool">false</property>
                    <property key="width" type="double">5</property>
                    <property key="height" type="double">5</property>
                    <property key="state" type="string">floating</property>
                    <property key="showTitleBar" type="bool">false</property>
                </ignition-gui>
            </plugin>
            <plugin filename="InteractiveViewControl" name="Interactive view control">
                <ignition-gui>
                    <property key="resizable" type="bool">false</property>
                    <property key="width" type="double">5</property>
                    <property key="height" type="double">5</property>
                    <property key="state" type="string">floating</property>
                    <property key="showTitleBar" type="bool">false</property>
                </ignition-gui>
            </plugin>
            <plugin filename="CameraTracking" name="Camera Tracking">
                <ignition-gui>
                    <property key="resizable" type="bool">false</property>
                    <property key="width" type="double">5</property>
                    <property key="height" type="double">5</property>
                    <property key="state" type="string">floating</property>
                    <property key="showTitleBar" type="bool">false</property>
                </ignition-gui>
            </plugin>

            <plugin filename="WorldControl" name="World control">
                <ignition-gui>
                    <title>World control</title>
                    <property type="bool" key="showTitleBar">false</property>
                    <property type="bool" key="resizable">false</property>
                    <property type="double" key="height">72</property>
                    <property type="double" key="width">121</property>
                    <property type="double" key="z">1</property>

                    <property type="string" key="state">floating</property>
                    <anchors target="3D View">
                        <line own="left" target="left"/>
                        <line own="bottom" target="bottom"/>
                    </anchors>
                </ignition-gui>

                <play_pause>true</play_pause>
                <step>true</step>
                <start_paused>true</start_paused>
                <use_event>true</use_event>
            </plugin>

            <plugin filename="WorldStats" name="World stats">
                <ignition-gui>
                    <title>World stats</title>
                    <property type="bool" key="showTitleBar">false</property>
                    <property type="bool" key="resizable">false</property>
                    <property type="double" key="height">110</property>
                    <property type="double" key="width">290</property>
                    <property type="double" key="z">1</property>

                    <property type="string" key="state">floating</property>
                    <anchors target="3D View">
                        <line own="right" target="right"/>
                        <line own="bottom" target="bottom"/>
                    </anchors>
                </ignition-gui>

                <sim_time>true</sim_time>
                <real_time>true</real_time>
                <real_time_factor>true</real_time_factor>
                <iterations>true</iterations>
            </plugin>

            <plugin filename="ComponentInspector" name="Component inspector">
                <ignition-gui>
                    <property type="string" key="state">docked</property>
                </ignition-gui>
            </plugin>

            <plugin filename="EntityTree" name="Entity tree">
                <ignition-gui>
                    <property type="string" key="state">docked</property>
                </ignition-gui>
            </plugin>

            <plugin filename="ImageDisplay" name="Image Display">
                <ignition-gui>
                    <title>Thermal camera</title>
                    <property key="state" type="string">floating</property>
                    <property key="width" type="double">350</property>
                    <property key="height" type="double">315</property>
                </ignition-gui>
                <topic>model/spot/camera/frontleft_fisheye_image</topic>
                <topic_picker>false</topic_picker>
            </plugin>

            <plugin filename="VisualizeLidar" name="Visualize Lidar">
            </plugin>
        </gui>

        <physics name="1ms" type="ode">
            <max_step_size>0.001</max_step_size>
            <real_time_factor>1.0</real_time_factor>
        </physics>

        <scene>
            <ambient>0.5 0.5 0.5 1.0</ambient>
            <background>0.7 0.7 0.7 1.0</background>
            <grid>false</grid>
            <origin_visual>false</origin_visual>
            <shadows>false</shadows>
        </scene>

        <atmosphere type="adiabatic">
            <temperature>288</temperature>
            <temperature_gradient>0.02</temperature_gradient>
        </atmosphere>

        <model name="indoor_lightmap">
            <static>true</static>
            <link name="base_link">
                <collision name="collision">
                    <pose>0 0 0 0 0 0</pose>
                    <geometry>
                        <mesh>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/meshes/indoor_lightmap.dae</uri>
                            <scale>1.0 1.0 1.0</scale>
                        </mesh>
                    </geometry>
                </collision>
                <visual name="Wall_visual">
                    <geometry>
                        <mesh>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/meshes/indoor_lightmap.dae</uri>
                            <submesh>
                                <name>Wall</name>
                                <center>false</center>
                            </submesh>
                        </mesh>
                    </geometry>
                    <material>
                        <diffuse>1.0 1.0 1.0</diffuse>
                        <specular>0.2 0.2 0.2</specular>
                        <pbr>
                            <metal>
                                <albedo_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/Wall_Albedo.png</albedo_map>
                                <roughness_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/Wall_Roughness.png</roughness_map>
                                <environment_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/IndoorCubemap.dds</environment_map>
                                <light_map uv_set="1">https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/LightmapEqualizeHistogram.png</light_map>
                                <metalness>0.0</metalness>
                            </metal>
                        </pbr>
                        <script>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/scripts/</uri>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/</uri>
                            <name>Indoor/Wall_Diffuse</name>
                        </script>
                    </material>
                </visual>
                <visual name="Floor_visual">
                    <geometry>
                        <mesh>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/meshes/indoor_lightmap.dae</uri>
                            <submesh>
                                <name>Floor</name>
                                <center>false</center>
                            </submesh>
                        </mesh>
                    </geometry>
                    <material>
                        <diffuse>1.0 1.0 1.0</diffuse>
                        <specular>0.1 0.1 0.1</specular>
                        <pbr>
                            <metal>
                                <albedo_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/Floor_Albedo.png</albedo_map>
                                <normal_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/Floor_Normal.png</normal_map>
                                <roughness_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/Floor_Roughness.png</roughness_map>
                                <environment_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/IndoorCubemap.dds</environment_map>
                                <light_map uv_set="1">https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/LightmapEqualizeHistogram.png</light_map>
                                <metalness>0.0</metalness>
                            </metal>
                        </pbr>
                        <script>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/scripts/</uri>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/</uri>
                            <name>Indoor/Floor_Diffuse</name>
                        </script>
                    </material>
                </visual>
                <visual name="CeilingTiles_visual">
                    <geometry>
                        <mesh>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/meshes/indoor_lightmap.dae</uri>
                            <submesh>
                                <name>CeilingTiles</name>
                                <center>false</center>
                            </submesh>
                        </mesh>
                    </geometry>
                    <material>
                        <diffuse>1.0 1.0 1.0</diffuse>
                        <specular>0.2 0.2 0.2</specular>
                        <pbr>
                            <metal>
                                <albedo_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/CeilingTiles_Albedo.png</albedo_map>
                                <normal_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/CeilingTiles_Normal.png</normal_map>
                                <roughness_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/CeilingTiles_Roughness.png</roughness_map>
                                <emissive_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/CeilingTiles_Emissive.png</emissive_map>
                                <environment_map>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/IndoorCubemap.dds</environment_map>
                                <light_map uv_set="1">https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/LightmapEqualizeHistogram.png</light_map>
                                <metalness>0.01</metalness>
                            </metal>
                        </pbr>
                        <script>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/scripts/</uri>
                            <uri>https://fuel.ignitionrobotics.org/1.0/openrobotics/models/indoor lightmap/1/files/materials/textures/</uri>
                            <name>Indoor/CeilingTiles_Diffuse</name>
                        </script>
                    </material>
                </visual>
            </link>
        </model>

        <model name="spot_robot">
            <pose>0.41 -1.14 0.4 0 0 0</pose>
            <link name="body">
                <pose>0 0 0 0 0 0</pose>
                <inertial>
                    <mass>20</mass>
                    <inertia>
                        <ixx>0.5</ixx>
                        <iyy>0.5</iyy>
                        <izz>0.3</izz>
                    </inertia>
                </inertial>
                <collision name="collision">
                    <geometry>
                        <box>
                            <size>1.0 0.5 0.4</size>
                        </box>
                    </geometry>
                </collision>
                <visual name="body_visual">
                    <geometry>
                        <box>
                            <size>1.0 0.5 0.4</size>
                        </box>
                    </geometry>
                    <material>
                        <ambient>1 0.8 0 1</ambient>
                        <diffuse>1 0.8 0 1</diffuse>
                        <emissive>0.3 0.2 0 1</emissive>
                    </material>
                </visual>
                <sensor name="lidar" type="gpu_lidar">
                    <pose>0.4 0 0.3 0 0 0</pose>
                    <topic>/scan</topic>
                    <update_rate>10</update_rate>
                    <lidar>
                        <scan>
                            <horizontal>
                                <samples>720</samples>
                                <min_angle>-3.14159</min_angle>
                                <max_angle>3.14159</max_angle>
                            </horizontal>
                        </scan>
                        <range>
                            <min>0.1</min>
                            <max>10</max>
                        </range>
                    </lidar>
                    <always_on>1</always_on>
                    <visualize>true</visualize>
                </sensor>
            </link>
            <link name="fl_leg">
                <pose>0.4 0.25 -0.2 0 0 0</pose>
                <inertial>
                    <mass>1</mass>
                </inertial>
                <collision name="collision">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                </collision>
                <visual name="visual">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                    <material>
                        <ambient>0.2 0.2 0.2 1</ambient>
                        <diffuse>0.2 0.2 0.2 1</diffuse>
                    </material>
                </visual>
            </link>
            <joint name="fl_joint" type="revolute">
                <parent>body</parent>
                <child>fl_leg</child>
                <axis>
                    <xyz>0 1 0</xyz>
                    <limit>
                        <lower>-0.5</lower>
                        <upper>0.5</upper>
                        <effort>100</effort>
                    </limit>
                </axis>
            </joint>
            <link name="fr_leg">
                <pose>0.4 -0.25 -0.2 0 0 0</pose>
                <inertial>
                    <mass>1</mass>
                </inertial>
                <collision name="collision">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                </collision>
                <visual name="visual">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                    <material>
                        <ambient>0.2 0.2 0.2 1</ambient>
                        <diffuse>0.2 0.2 0.2 1</diffuse>
                    </material>
                </visual>
            </link>
            <joint name="fr_joint" type="revolute">
                <parent>body</parent>
                <child>fr_leg</child>
                <axis>
                    <xyz>0 1 0</xyz>
                    <limit>
                        <lower>-0.5</lower>
                        <upper>0.5</upper>
                        <effort>100</effort>
                    </limit>
                </axis>
            </joint>
            <link name="bl_leg">
                <pose>-0.4 0.25 -0.2 0 0 0</pose>
                <inertial>
                    <mass>1</mass>
                </inertial>
                <collision name="collision">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                </collision>
                <visual name="visual">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                    <material>
                        <ambient>0.2 0.2 0.2 1</ambient>
                        <diffuse>0.2 0.2 0.2 1</diffuse>
                    </material>
                </visual>
            </link>
            <joint name="bl_joint" type="revolute">
                <parent>body</parent>
                <child>bl_leg</child>
                <axis>
                    <xyz>0 1 0</xyz>
                    <limit>
                        <lower>-0.5</lower>
                        <upper>0.5</upper>
                        <effort>100</effort>
                    </limit>
                </axis>
            </joint>
            <link name="br_leg">
                <pose>-0.4 -0.25 -0.2 0 0 0</pose>
                <inertial>
                    <mass>1</mass>
                </inertial>
                <collision name="collision">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                </collision>
                <visual name="visual">
                    <geometry>
                        <cylinder>
                            <radius>0.05</radius>
                            <length>0.4</length>
                        </cylinder>
                    </geometry>
                    <material>
                        <ambient>0.2 0.2 0.2 1</ambient>
                        <diffuse>0.2 0.2 0.2 1</diffuse>
                    </material>
                </visual>
            </link>
            <joint name="br_joint" type="revolute">
                <parent>body</parent>
                <child>br_leg</child>
                <axis>
                    <xyz>0 1 0</xyz>
                    <limit>
                        <lower>-0.5</lower>
                        <upper>0.5</upper>
                        <effort>100</effort>
                    </limit>
                </axis>
            </joint>
            <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive">
                <left_joint>bl_joint</left_joint>
                <right_joint>br_joint</right_joint>
                <wheel_separation>0.5</wheel_separation>
                <wheel_radius>0.15</wheel_radius>
                <topic>/cmd_vel</topic>
                <odom_topic>/odom</odom_topic>
            </plugin>
        </model>

        <model name="waypoint_A">
            <static>true</static>
            <pose>-3.5 -0.5 0.3 0 0 0</pose>
            <link name="link">
                <visual name="v1">
                    <geometry>
                        <sphere>
                            <radius>0.3</radius>
                        </sphere>
                    </geometry>
                    <material>
                        <ambient>1 0 0 1</ambient>
                        <diffuse>1 0 0 1</diffuse>
                        <emissive>1 0 0 1</emissive>
                    </material>
                </visual>
            </link>
        </model>

        <model name="waypoint_B">
            <static>true</static>
            <pose>0 -3.5 0.3 0 0 0</pose>
            <link name="link">
                <visual name="v2">
                    <geometry>
                        <sphere>
                            <radius>0.3</radius>
                        </sphere>
                    </geometry>
                    <material>
                        <ambient>1 0 0 1</ambient>
                        <diffuse>1 0 0 1</diffuse>
                        <emissive>1 0 0 1</emissive>
                    </material>
                </visual>
            </link>
        </model>

        <model name="waypoint_C">
            <static>true</static>
            <pose>3.5 0.5 0.3 0 0 0</pose>
            <link name="link">
                <visual name="v3">
                    <geometry>
                        <sphere>
                            <radius>0.3</radius>
                        </sphere>
                    </geometry>
                    <material>
                        <ambient>1 0 0 1</ambient>
                        <diffuse>1 0 0 1</diffuse>
                        <emissive>1 0 0 1</emissive>
                    </material>
                </visual>
            </link>
        </model>

        <model name="waypoint_D">
            <static>true</static>
            <pose>0 1.5 0.3 0 0 0</pose>
            <link name="link">
                <visual name="v4">
                    <geometry>
                        <sphere>
                            <radius>0.3</radius>
                        </sphere>
                    </geometry>
                    <material>
                        <ambient>1 0 0 1</ambient>
                        <diffuse>1 0 0 1</diffuse>
                        <emissive>1 0 0 1</emissive>
                    </material>
                </visual>
            </link>
        </model>

        <model name="apriltag_box">
            <static>false</static>
            <pose>3.5 -1.36 -0.2 0 0 0</pose> 
            <link name="link">
                <collision name="collision">
                    <geometry>
                        <box>
                            <size>1 1 1</size>
                        </box>
                    </geometry>
                </collision>

                <visual name="visual_box">
                    <geometry>
                        <box>
                            <size>1 1 1</size>
                        </box>
                    </geometry>
                    <material>
                        <ambient>0 0 1 1</ambient>
                        <diffuse>0 0 1 1</diffuse>
                        <specular>0.5 0.5 0.5 1</specular>
                    </material>
                </visual>

                <visual name="visual">
                  <pose>-0.501 0 0 0 -1.5707 0</pose>
                  <geometry>
                    <box>
                      <size>0.5 0.5 0.001</size>
                    </box>
                  </geometry>
                  <material>
                    <ambient>1 1 1 1</ambient>
                    <diffuse>1 1 1 1</diffuse>
                    <specular>0.5 0.5 0.5 1</specular>
                    <pbr>
                      <metal>
                        <albedo_map>materials/textures/tag41_12_00000.png</albedo_map>
                        <roughness>0.5</roughness>
                        <metalness>0.0</metalness>
                      </metal>
                    </pbr>
                  </material>
                </visual>
            </link>
        </model>
    </world>
</sdf>